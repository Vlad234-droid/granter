(this.webpackJsonpgranter=this.webpackJsonpgranter||[]).push([[3],{439:function(e,a,t){},440:function(e,a,t){},441:function(e,a,t){"use strict";t.r(a);var n=t(5),l=t(0),r=t.n(l),c=t(8),m=t(430),s=t(432),i=t(434),o=t(49),u=t(18),p=t(57),d=t(428),E=t(87),f=t(176),b=t(217),v=t(101),g=t(72),_=t(7),N=t(68),y=t.n(N),h=t(16),j=t(11),O=t.n(j),C=t(24),w=t(17),k=t.n(w),S=function(){var e=Object(C.a)(O.a.mark((function e(a){var t,n,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=k.a.get("auth-key"),e.next=4,fetch("".concat("http://granter.get-code.net/api/public","/profile/delete/company/").concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(!(l=e.sent).success){e.next=10;break}return e.abrupt("return",l);case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(a){return e.apply(this,arguments)}}(),P=(t(439),r.a.createElement(g.a,{style:{fontSize:20},spin:!0})),R=d.a.Dragger,q=function(e){var a=e.company,t=e.updateCompany,s=e.setCompaniesList,u=Object(l.useState)(null),p=Object(n.a)(u,2),d=p[0],g=p[1],N=Object(l.useState)(!1),j=Object(n.a)(N,2),O=j[0],C=j[1],w=Object(l.useState)(!1),k=Object(n.a)(w,2),q=k[0],F=k[1],I=Object(l.useState)(!1),A=Object(n.a)(I,2),D=A[0],L=A[1],U=m.a.useForm(),x=Object(n.a)(U,1)[0],B=Object(c.c)((function(e){return e.user.companies})),T=Object(l.useState)(!1),M=Object(n.a)(T,2),V=M[0],Y=M[1],z=Object(l.useState)(!1),J=Object(n.a)(z,2),G=J[0],H=J[1];Object(l.useEffect)((function(){var e=!1;return x.setFieldsValue({number:a.number,accountant_email:a.accountant_email,revenue:a.revenue,utr:a.utr,sme_or_rdec:a.sme_or_rdec}),e||g(a.avatar),function(){return e=!0}}),[a,x]);var K=function(e){L(!0),Object(h.B)(a.id,e.file).then((function(e){L(!1),g(e.avatar)})),e.onSuccess("ok")},Q=r.a.createElement("div",{className:"wrapper_dropDown"},r.a.createElement("h4",null,"Are you sure you want to delete this \u0441ompany? All the documents, claims will be deleted as well"),r.a.createElement("div",{className:"dropDown__btn_container"},r.a.createElement(o.a,{type:"button",onClick:function(){Y((function(e){return!e}))}},"Back"),r.a.createElement(o.a,{type:"primary",className:"delete__red",loading:G,onClick:function(){H((function(){return!0})),S(null===a||void 0===a?void 0:a.id).then((function(e){e.success&&(H((function(){return!0})),E.a.success({description:"Company was deleted successfully"}),Y((function(e){return!e})),s((function(e){return e.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)}))})))}))}},"Delete")));return r.a.createElement("li",{className:"profile__company ".concat(V?"red_Company":"")},r.a.createElement("div",{className:"profile__company_title"},r.a.createElement("h3",null,r.a.createElement("span",null,a.name)),r.a.createElement("div",{className:"profile__wrapper_btn",id:"btn_del"},!O&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"profile__btn_mode",onClick:function(e){C(!0)}},r.a.createElement(_.s,null)),1!==B.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{overlay:Q,placement:"bottomRight",trigger:"click",visible:V,onVisibleChange:function(){V&&Y((function(e){return!e}))},getPopupContainer:function(){return document.getElementById("btn_del")}},r.a.createElement("button",{onClick:function(){Y((function(e){return!e}))},className:"profile__btn_delete"},r.a.createElement(_.j,null))))))),r.a.createElement(m.a,{form:x,onFinish:function(e){F(!0),Object(h.A)(a.id,e).then((function(e){F(!1),C(!1),t(e)}))}},r.a.createElement("section",{className:"profile__company_details"},r.a.createElement("div",{className:"company--row"},r.a.createElement("div",{className:"label"},"Registered Number"),r.a.createElement("div",{className:"details"},O?r.a.createElement(m.a.Item,{name:"number",rules:[{required:!0,message:"Please input Company Number!"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,a.number))),r.a.createElement("div",{className:"company--row"},r.a.createElement("div",{className:"label"},"Accountant Email"),r.a.createElement("div",{className:"details"},O?r.a.createElement(m.a.Item,{name:"accountant_email",rules:[{required:!0,message:"Please input Company Email!"},{type:"email",message:"Please input valid Company Email!"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,a.accountant_email))),r.a.createElement("div",{className:"company--row"},r.a.createElement("div",{className:"label"},"Revenue"),r.a.createElement("div",{className:"details"},O?r.a.createElement(m.a.Item,{name:"revenue",rules:[{required:!0,message:"Please input Revenue!"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,a.revenue))),r.a.createElement("div",{className:"company--row"},r.a.createElement("div",{className:"label"},"UTR"),r.a.createElement("div",{className:"details"},O?r.a.createElement(m.a.Item,{name:"utr",rules:[{required:!0,message:"Please input UTR!"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,a.utr))),r.a.createElement("div",{className:"company--row"},r.a.createElement("div",{className:"label"},"SME or RDEC"),r.a.createElement("div",{className:"details"},O?r.a.createElement(m.a.Item,{name:"sme_or_rdec",rules:[{required:!0,message:"Please input SME or RDEC!"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,a.sme_or_rdec))),r.a.createElement("div",{className:"company--row"},r.a.createElement("div",{className:"label"},"Assigned Consultant"),r.a.createElement("div",{className:"details"},a.manager&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"manager"},a.manager.name,",")," ",r.a.createElement("span",{className:"manager"},a.manager.phone)))),r.a.createElement("div",{className:"company--row"},r.a.createElement("div",{className:"label"},"Company Logo"),r.a.createElement("div",{className:"details"},d?r.a.createElement("div",{className:"company--logo"},r.a.createElement(R,{customRequest:K,showUploadList:!1,accept:"image/png, image/gif, image/jpeg"},D&&r.a.createElement("div",{className:"upload-loading"},r.a.createElement(b.a,{indicator:P})),r.a.createElement(v.a,{placement:"top",title:"Upload png or jpeg"},r.a.createElement("img",{src:d,alt:d})))):r.a.createElement(R,{customRequest:K,showUploadList:!1,accept:"image/png, image/gif, image/jpeg"},D&&r.a.createElement("div",{className:"upload-loading"},r.a.createElement(b.a,{indicator:P})),r.a.createElement(v.a,{placement:"top",title:"Upload png or jpeg"},r.a.createElement("div",{className:"upload-title"},r.a.createElement("img",{src:y.a,alt:""}),r.a.createElement("span",null,"Upload Logo")))))))),O&&r.a.createElement("div",{className:"profile__company_actions"},r.a.createElement(o.a,{type:"button",loading:q,onClick:function(e){C(!1)}},"Cancel"),r.a.createElement(o.a,{type:"primary",loading:q,onClick:function(e){x.submit()}},"Save")))},F=(t(440),t(14)),I=t(13);a.default=function(){var e=Object(l.useState)(null),a=Object(n.a)(e,2),t=a[0],d=a[1],E=Object(l.useState)(!1),f=Object(n.a)(E,2),b=f[0],v=f[1],g=Object(l.useState)(!1),N=Object(n.a)(g,2),y=N[0],j=N[1],O=Object(l.useState)(null),C=Object(n.a)(O,2),w=C[0],k=C[1],S=m.a.useForm(),P=Object(n.a)(S,1)[0],R=Object(c.b)(),A=Object(I.a)(F.a,R).registrationChangeEstimate;Object(l.useEffect)((function(){Object(h.j)().then((function(e){d(e),P.setFieldsValue({name:e.profile.name,team_role:e.profile.team_role,address:e.profile.address,enable_notifications:e.profile.enable_notifications,phone:e.profile.phone}),Object(h.m)(R).then((function(e){k(e)}))}))}),[]),Object(l.useEffect)((function(){(0,Object(I.a)(F.a,R).userCompaniesLoaded)(w)}),[w]);var D=function(e){var a=w.map((function(a){return a.id===e.id?e:a}));k(a)};return r.a.createElement(p.a,{className:"dashboard profile"},r.a.createElement("div",{className:"wrapp_profile_logOut"},r.a.createElement("div",{className:"profile__general"},r.a.createElement("div",{className:"profile__general_title"},r.a.createElement("h2",null,r.a.createElement("span",null,"Personal Information"),!b&&r.a.createElement("button",{onClick:function(e){v(!0)}},r.a.createElement(_.s,null)))),t?r.a.createElement(m.a,{name:"profile",form:P,onFinish:function(e){j(!0),Object(h.E)(e).then((function(e){d(e),j(!1),v(!1)}))}},r.a.createElement("ul",{className:"profile__general_table"},r.a.createElement("li",null,r.a.createElement("div",{className:"label"},"Full Name"),r.a.createElement("div",{className:"details"},b?r.a.createElement(m.a.Item,{name:"name",rules:[{required:!0,message:"Please input your name!"},{max:255,message:"\u0415he permissible meaning of the symbols is 255"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,t.profile.name))),r.a.createElement("li",null,r.a.createElement("div",{className:"label"},"Role"),r.a.createElement("div",{className:"details"},b?r.a.createElement(m.a.Item,{name:"team_role",rules:[{required:!0,message:"Please input your Role!"}]},r.a.createElement(i.a,null)):r.a.createElement(r.a.Fragment,null,t.profile.team_role?r.a.createElement("span",null,t.profile.team_role):r.a.createElement("div",{className:"alert"},r.a.createElement(_.A,null),r.a.createElement("span",null,"Not Setted"),r.a.createElement("a",{href:"",onClick:function(e){e.preventDefault(),v(!0)}},"Set the Role"))))),r.a.createElement("li",null,r.a.createElement("div",{className:"label"},"Registered Address"),r.a.createElement("div",{className:"details"},b?r.a.createElement(m.a.Item,{name:"address",rules:[{required:!0,message:"Please input your Registered Address!"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,t.profile.address))),r.a.createElement("li",null,r.a.createElement("div",{className:"label"},"Your Email"),r.a.createElement("div",{className:"details"},r.a.createElement("span",null,t.email))),r.a.createElement("li",null,r.a.createElement("div",{className:"label"},"Your Phone Number"),r.a.createElement("div",{className:"details"},b?r.a.createElement(m.a.Item,{name:"phone",rules:[{required:!0,message:"Please input your Phone Number!"}]},r.a.createElement(i.a,null)):r.a.createElement("span",null,t.profile.phone))),r.a.createElement("li",null,r.a.createElement("div",{className:"label"},"Your Password"),r.a.createElement("div",{className:"details"},r.a.createElement(u.b,{to:"/profile/change-password/"},"Change password"))))):r.a.createElement(s.a,{active:!0}),b&&r.a.createElement("div",{className:"profile__general_actions"},r.a.createElement(o.a,{type:"button",onClick:function(e){v(!1)}},"Cancel"),r.a.createElement(o.a,{type:"primary",loading:y,onClick:function(e){P.submit()}},"Save")))),r.a.createElement("div",{className:"profile__companies"},r.a.createElement("h2",null,r.a.createElement("span",null,"My Companies"),r.a.createElement(u.b,{to:"/profile/add-project/",onClick:function(){return A(null)}},r.a.createElement(_.n,null))),r.a.createElement("ul",{className:"profile__companies_list"},w&&w.map((function(e){return r.a.createElement(q,{key:"company-".concat(e.id),company:e,updateCompany:D,setCompaniesList:k})})))))}}}]);
//# sourceMappingURL=3.49f8cf04.chunk.js.map